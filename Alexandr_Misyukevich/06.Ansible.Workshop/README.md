# Homework Assignment 1: Configuration Management

[Inventory](./inv.yaml)

[Ansible config](./ansible.cfg)

[Playbook](./web_server_playbook.yaml)

### Templates

[Site 1](./templates/site1.conf.j2)

[Site 2](./templates/site2.conf.j2)


## Playbook output

```shell
PLAY [Install and configure Nginx] ***********************************************************************************************************************

TASK [Gathering Facts] ***********************************************************************************************************************************
Среда 15 января 2025  18:44:48 +0300 (0:00:00.025)       0:00:00.025 **********
ok: [nginx]

TASK [Install Nginx] *************************************************************************************************************************************
Среда 15 января 2025  18:44:57 +0300 (0:00:09.677)       0:00:09.702 **********
changed: [nginx]

TASK [Manage the Nginx Process] **************************************************************************************************************************
Среда 15 января 2025  18:45:07 +0300 (0:00:09.621)       0:00:19.323 **********
ok: [nginx]

TASK [Create directories for the websites] ***************************************************************************************************************
Среда 15 января 2025  18:45:14 +0300 (0:00:06.854)       0:00:26.177 **********
changed: [nginx] => (item=/var/www/site1)
changed: [nginx] => (item=/var/www/site2)

TASK [Create index.html for site1] ***********************************************************************************************************************
Среда 15 января 2025  18:45:26 +0300 (0:00:12.376)       0:00:38.554 **********
changed: [nginx]

TASK [Create index.html for site2] ***********************************************************************************************************************
Среда 15 января 2025  18:45:38 +0300 (0:00:11.690)       0:00:50.244 **********
changed: [nginx]

TASK [Add entries to /etc/hosts] *************************************************************************************************************************
Среда 15 января 2025  18:45:49 +0300 (0:00:11.217)       0:01:01.462 **********
changed: [nginx] => (item=site1.example.com)
changed: [nginx] => (item=site2.example.com)

TASK [Template Nginx configuration for site1] ************************************************************************************************************
Среда 15 января 2025  18:46:01 +0300 (0:00:12.354)       0:01:13.816 **********
changed: [nginx]

TASK [Template Nginx configuration for site2] ************************************************************************************************************
Среда 15 января 2025  18:46:13 +0300 (0:00:11.629)       0:01:25.445 **********
changed: [nginx]

TASK [Enable virtual host by creating link for site1] ****************************************************************************************************
Среда 15 января 2025  18:46:24 +0300 (0:00:11.114)       0:01:36.560 **********
changed: [nginx]

TASK [Enable virtual host by creating link for site2] ****************************************************************************************************
Среда 15 января 2025  18:46:30 +0300 (0:00:05.904)       0:01:42.464 **********
changed: [nginx]

TASK [reload nginx] **************************************************************************************************************************************
Среда 15 января 2025  18:46:36 +0300 (0:00:06.016)       0:01:48.480 **********
changed: [nginx]

TASK [Check if Site 1 is reachable] **********************************************************************************************************************
Среда 15 января 2025  18:46:42 +0300 (0:00:06.378)       0:01:54.859 **********
ok: [nginx]

TASK [Check if Site 2 is reachable] **********************************************************************************************************************
Среда 15 января 2025  18:46:49 +0300 (0:00:06.657)       0:02:01.516 **********
ok: [nginx]

TASK [Output content of Site 1] **************************************************************************************************************************
Среда 15 января 2025  18:46:55 +0300 (0:00:06.124)       0:02:07.641 **********
ok: [nginx] => {
    "msg": "Content of Site 1: <h1>Welcome to Site 1</h1>"
}

TASK [Output content of Site 2] **************************************************************************************************************************
Среда 15 января 2025  18:46:55 +0300 (0:00:00.076)       0:02:07.717 **********
ok: [nginx] => {
    "msg": "Content of Site 2: <h1>Welcome to Site 2</h1>"
}

TASK [Assert that Site 1 is working] *********************************************************************************************************************
Среда 15 января 2025  18:46:55 +0300 (0:00:00.085)       0:02:07.803 **********
ok: [nginx] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Assert that Site 2 is working] *********************************************************************************************************************
Среда 15 января 2025  18:46:55 +0300 (0:00:00.080)       0:02:07.884 **********
ok: [nginx] => {
    "changed": false,
    "msg": "All assertions passed"
}

RUNNING HANDLER [reload nginx] ***************************************************************************************************************************
Среда 15 января 2025  18:46:56 +0300 (0:00:00.138)       0:02:08.022 **********
changed: [nginx]

PLAY RECAP ***********************************************************************************************************************************************
nginx                      : ok=19   changed=11   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0


TASKS RECAP **********************************************************************************************************************************************
Среда 15 января 2025  18:47:02 +0300 (0:00:06.699)       0:02:14.722 **********
===============================================================================
Create directories for the websites -------------------------------------------------------------------------------------------------------------- 12.38s
Add entries to /etc/hosts ------------------------------------------------------------------------------------------------------------------------ 12.35s
Create index.html for site1 ---------------------------------------------------------------------------------------------------------------------- 11.69s
Template Nginx configuration for site1 ----------------------------------------------------------------------------------------------------------- 11.63s
Create index.html for site2 ---------------------------------------------------------------------------------------------------------------------- 11.22s
Template Nginx configuration for site2 ----------------------------------------------------------------------------------------------------------- 11.11s
Gathering Facts ----------------------------------------------------------------------------------------------------------------------------------- 9.68s
Install Nginx ------------------------------------------------------------------------------------------------------------------------------------- 9.62s
Manage the Nginx Process -------------------------------------------------------------------------------------------------------------------------- 6.85s
reload nginx -------------------------------------------------------------------------------------------------------------------------------------- 6.70s
Check if Site 1 is reachable ---------------------------------------------------------------------------------------------------------------------- 6.66s
reload nginx -------------------------------------------------------------------------------------------------------------------------------------- 6.38s
Check if Site 2 is reachable ---------------------------------------------------------------------------------------------------------------------- 6.12s
Enable virtual host by creating link for site2 ---------------------------------------------------------------------------------------------------- 6.02s
Enable virtual host by creating link for site1 ---------------------------------------------------------------------------------------------------- 5.90s
Assert that Site 2 is working --------------------------------------------------------------------------------------------------------------------- 0.14s
Output content of Site 2 -------------------------------------------------------------------------------------------------------------------------- 0.09s
Assert that Site 1 is working --------------------------------------------------------------------------------------------------------------------- 0.08s
Output content of Site 1 -------------------------------------------------------------------------------------------------------------------------- 0.08s

PLAYBOOK RECAP *******************************************************************************************************************************************
Playbook run took 0 days, 0 hours, 2 minutes, 14 seconds


```



